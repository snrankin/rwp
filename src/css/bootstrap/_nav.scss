/// ======================================================================== ///
/// @name   _nav
///
/// @group  RWP
/// @since  1.0.0
/// @author RIESTER <wordpress@riester.com>
/// ======================================================================== ///

@import '~bootstrap/scss/nav';
@import '~bootstrap/scss/navbar';

.nav-item {
	// stylelint-disable-next-line
	--#{$variable-prefix}-icon-size: rem(42px);

	display: grid;
	grid-template-columns: 1fr var(--#{$variable-prefix}-icon-size);
	position: relative;
}

.sub-nav {
	min-width: 100%;
}

.nav-link {
	flex: 1 1 auto;
	display: flex;
	align-items: center;
	grid-row: 1/2;
	white-space: nowrap;
	position: relative;
	z-index: 2;
}

.nav-toggle {
	grid-row: 1/2;
	position: relative;
	z-index: 2;
}

.subnav {
	grid-column: 1/3;
	grid-row: 2/3;
	z-index: 2;
}

.navbar {
	@each $color, $value in $theme-colors {
		&.bg-#{$color} {
			.sub-nav {
				// stylelint-disable-next-line
				--#{$variable-prefix}-sub-nav-bg: #{$value};

				background-color: var(--#{$variable-prefix}-sub-nav-bg);
			}
		}
	}
}

// Generate series of `.navbar-expand-*` responsive classes for configuring
// where your navbar collapses.
.navbar-expand {
	@each $breakpoint in map-keys($grid-breakpoints) {
		$next: breakpoint-next($breakpoint, $grid-breakpoints);
		$infix: breakpoint-infix($next, $grid-breakpoints);

		&#{$infix} {
			@include media-breakpoint-up($next) {
				.sub-nav.level-1-menu {
					position: absolute;
					top: 100%;
					left: 0;
					z-index: $zindex-dropdown;
					padding: $dropdown-padding-y $dropdown-padding-x;
					text-align: left; // Ensures proper alignment if parent has it changed (e.g., modal footer)
					background-clip: padding-box;
					border: $dropdown-border-width solid $dropdown-border-color;
					@include border-radius($dropdown-border-radius);
					@include box-shadow($dropdown-box-shadow);

					ul {
						@include font-size($dropdown-font-size);
					}
				}
			}
		}
	}

	.nav-item {
		&:not(.level-0-item) {
			padding: $dropdown-item-padding-y $dropdown-item-padding-x;

			// Prevent dropdown overflow if there's no padding
			// See https://github.com/twbs/bootstrap/pull/27703
			@if $dropdown-padding-y == 0 {
				&:first-child {
					@include border-top-radius($dropdown-inner-border-radius);
				}

				&:last-child {
					@include border-bottom-radius($dropdown-inner-border-radius);
				}
			}

			.nav-link {
				padding: 0;
			}
		}
	}
}
