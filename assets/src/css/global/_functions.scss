@import '~bootstrap/scss/functions';
////
// A collection of function for advanced type checking
// @author Hugo Giraudel
////

@function is-number($value) {
	@return type-of($value) == 'number';
}

@function is-time($value) {
	@return is-number($value) and index('ms' 's', unit($value)) != null;
}

@function is-duration($value) {
	@return is-time($value);
}

@function is-angle($value) {
	@return is-number($value) and index('deg' 'rad' 'grad' 'turn', unit($value))
		!= null;
}

@function is-frequency($value) {
	@return is-number($value) and index('Hz' 'kHz', unit($value)) != null;
}

@function is-integer($value) {
	@return is-number($value) and round($value) == $value;
}

@function is-relative-length($value) {
	@return is-number($value) and
		index('em' 'ex' 'ch' 'rem' 'vw' 'vh' 'vmin' 'vmax', unit($value)) !=
		null;
}

@function is-absolute-length($value) {
	@return is-number($value) and
		index('cm' 'mm' 'in' 'px' 'pt' 'pc', unit($value)) != null;
}

@function is-percentage($value) {
	@return is-number($value) and unit($value) == '%';
}

@function is-length($value) {
	@return is-relative-length($value) or is-absolute-length($value);
}

@function is-resolution($value) {
	@return is-number($value) and index('dpi' 'dpcm' 'dppx', unit($value)) !=
		null;
}

@function is-position($value) {
	@return is-length($value) or is-percentage($value) or
		index('top' 'right' 'bottom' 'left' 'center', $value) != null;
}

/// Map deep get
/// @author Hugo Giraudel
/// @link https://css-tricks.com/snippets/sass/deep-getset-maps/
/// @access public
/// @param {Map} $map - Map
/// @param {Arglist} $keys - Key chain
/// @return {*} - Desired value
@function map-deep-get($map, $keys...) {
	@each $key in $keys {
		$map: map-get($map, $key);
	}
	@return $map;
}

@function sqrt($r) {
	$x0: 1;
	$x1: $x0;

	@for $i from 1 through 10 {
		$x1: $x0 - ($x0 * $x0 - abs($r)) / (2 * $x0);
		$x0: $x1;
	}

	@return $x1;
}

@function strip-units($number) {
	@return $number / ($number * 0 + 1);
}

@function square($number) {
	$unitless: strip-units($number);

	@return ($unitless * $unitless);
}

@function get-unit($number) {
	@return unit($number);
}

@function get-hypotenuse($ab, $ac) {
	@if get-unit($ab) == get-unit($ac) {
		@return sqrt(square($ab) + square($ac)) + unquote(get-unit($ab));
	} @else {
		@error 'The two value into the get-hypotenuse() function must share the same unit type';
	}
}

/// Replace `$search` with `$replace` in `$string`
/// @author Kitty Giraudel
/// @param {String} $string - Initial string
/// @param {String} $search - Substring to replace
/// @param {String} $replace ('') - New value
/// @return {String} - Updated string
@function str-replace($string, $search, $replace: '') {
	$index: str-index($string, $search);

	@if $index {
		@return str-slice($string, 1, $index - 1) + $replace +
			str-replace(
				str-slice($string, $index + str-length($search)),
				$search,
				$replace
			);
	}

	@return $string;
}

@function str-remove-whitespace($str) {
	@while (str-index($str, ' ') != null) {
		$index: str-index($str, ' ');
		$str: '#{str-slice($str, 0, $index - 1)}#{str-slice($str, $index + 1)}';
	}
	@return $str;
}

@function str-remove-dashes($str) {
	@while (str-index($str, '-') != null) {
		$index: str-index($str, '-');
		$str: '#{str-slice($str, 0, $index - 1)}#{str-slice($str, $index + 1)}';
	}
	@return $str;
}

@function rem($size) {
	$remSize: (strip-units($size) / 16) * 1rem;
	@return $remSize;
}

@function remtopx($size) {
	$pxSize: (strip-units($size) * 16) * 1px;
	@return $pxSize;
}

@function remtopt($size) {
	$pxSize: (strip-units($size) * 16) * 0.75pt;
	@return $pxSize;
}

@function pxtopt($size) {
	$pxSize: strip-units($size) * 0.75pt;
	@return $pxSize;
}

@function lineheightex($size) {
	$unit: unit($size);
	$number: strip-units($size);
	@if $unit == '%' {
		$number: $number/100;
	} @else if $unit == 'px' {
		$number: rem($size);
		$number: strip-units($number);
	}
	@return $number * 2ex;
}
